---
#
# boot_parameters
#
boot_parameters_enable:
  - quiet

boot_parameters_disable:
  - debug
  - rd.lvm.lv
  - resume
  - rhgb

boot_parameters_timeout: 1

# Protect boot parameters with password
# NB. For the time being this should be
# PBKDF2 hash to allow idempotency, use
# grub2-mkpasswd-pbkdf2(3) to create one
# Boot loader username is always 'root'
# This should come from vault. If unset
# current configuration is not touched,
# setting to empty will remove password
#boot_parameters_password:

# Reboot system after parameter changes
boot_parameters_reboot: true

#
# dns_cache
#
# Enable or disable DNS cache
dns_cache_enable: true

# DNS caching component (dnsmasq recommended)
# Allowed values: dnsmasq, nscd, systemd-resolved
# See https://access.redhat.com/solutions/2189381
dns_cache_component: dnsmasq

# Minimum cache/local/negative TTL value for dnsmasq
# to use in case none is provided in upstream reply
dns_cache_dnsmasq_ttl: 60

# Optional value for dnsmasq 'local' config option
dns_cache_dnsmasq_local_domain:

# NetworkManager dnsmasq configuration template
# to use instead of the role provided default one
dns_cache_nm_dnsmasq_config_file:

#
# etc_hosts
#
# /etc/hosts header to always apply (subject to etc_hosts_omit_entries)
# This default header matches the most recent Fedora/upstream headers
etc_hosts_header: |
  # Loopback entries; do not change.
  # For historical reasons, localhost precedes localhost.localdomain:
  127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
  ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

# Add entry for host itself based on Ansible facts
# This should be disabled when not using static IP
etc_hosts_self_add: true

# Force domain name used in host self entry
# If unset defaults to ansible_facts.domain
# Required if ansible_facts.domain is empty
etc_hosts_self_domain:

# List of lines to add to /etc/hosts
# NB. Other entries will be removed
etc_hosts_entries:
#  - 192.168.122.1    gateway.example.com gateway
#  - 192.168.122.150  bastion.example.com bastion

# /etc/hosts entries to omit
# none - do not omit entries
# ipv4 - omit all IPv4 entries
# ipv6 - omit all IPv6 entries
etc_hosts_omit_entries: ipv6

#
# guest_agent
#
# Install or remove server VM guest agents
# This role will detect and enable correct
# agent and remove other agents if present
# Will uninstall all agents if set to false
# NB. Only agents from RHEL repositories
#     are considered for un/installation
#     Currently recognized platforms are:
#       - Azure
#       - KVM/Qemu
#       - VMware
guest_agent_enable: true

# Remove unneeded firmware packages on VMs
# VMs with device passthrough may need these
guest_agent_remove_firmware: true

#
# insights_client
#
# Register or unregister the system with Red Hat Insights
# See https://access.redhat.com/products/red-hat-insights
insights_client_register: false

# Optional tag/value pairs to apply for the system
insights_client_tags:
#  group: prod
#  security: strict
#  network_performance: latency

# Enable remote host configuration (rhc)
# See https://access.redhat.com/articles/rhc
insights_client_rhc_enable: true

# Install OpenSCAP packages to allow compliance scanning
# See https://access.redhat.com/articles/4602981
insights_client_scap_enable: true

# Proxy server to use with insights-client
insights_client_proxy_server:

#
# ipv6_setup
#
# Enable or disable IPv6 using sysctl settings
# Boot parameter to disable IPv6 will be removed
# See https://access.redhat.com/solutions/8709
ipv6_setup_enable: false

# Some applications (e.g., Samba) require IPv6 stack
# to be enabled to function but need no IPv6 routing
# This option keeps IPv6 on for the loopback device
# This option has effect only when disabling IPv6
ipv6_setup_loopback_persist: false

# Set to true to configure NetworkManager/IPv6 with this role
# When using system_roles.network to configure NM set to false
ipv6_setup_configure_nm: true

#
# packages_install
#
packages_install:
  - acl
  - bash-completion
  - bind-utils
  - curl
  #-git-core
  - man-pages
  - mlocate
  - nano
  - openssh-clients
  #- perl-interpreter
  - psmisc
  - "{{ 'python3' if ansible_facts.distribution_major_version | int >= 8 else 'python' }}"
  - "{{ 'python3-libselinux' if ansible_facts.distribution_major_version | int >= 8 else 'libselinux-utils' }}"
  - "{{ 'policycoreutils-python-utils' if ansible_facts.distribution_major_version | int >= 8 else 'policycoreutils-python' }}"
  - setools-console
  #- sos
  - tar
  #- "{{ 'tmux' if ansible_facts.distribution_major_version | int >= 8 else 'screen' }}"
  #- unzip
  #- vim-enhanced
  - wget
  - xz
  - yum-utils
  - "{{ 'zstd' if ansible_facts.distribution_major_version | int >= 8 else '' }}"

# Enable or disable yum module 'install_weak_deps' parameter
packages_install_weak_deps: true

#
# packages_remove
#
packages_remove:
  - gofer
  - katello-agent
  - puppet-agent
  - rhn*
  - telnet-server

  - biosdevname
  - cloud-init
  - flashrom
  - fonts*
  - gawk-all-langpacks
  - geolite*
  - glibc-gconv-extra
  - hwdata
  - kernel-tools
  - libicu
  - libjpeg*
  - linux-firmware-whence
  - lshw
  - NetworkManager-tui
  - nfs*
  - libnfs*
  - parted
  - rpc*
  - sssd*
  - libsss*
  - tcpdump
  - teamd
  - webkit*

# Enable or disable yum module 'autoremove' parameter
# to remove all "leaf" packages no longer required
packages_remove_autoremove: true

#
# performance_tuning
#
tuned_profile: "{{ 'virtual-guest' if ansible_facts.virtualization_role == 'guest' else 'throughput-performance' }}"

#
# rescue_image
#
# Enable or disable rescue image
# NB. Rescue images will be created on next kernel install
rescue_image_enable: false

#
# system_coredump
#
# Enable or disable system-wide coredumps
system_coredump_enable: false

#
# system_hostname
#
# System hostname to be configured in /etc/hostname
#
# Should be short name (not FQDN) when using DHCP,
# FQDN might be better option when using static IP
# but some software will require using short names
# Note that maximum allowed length is 63 characters
system_hostname: "{{ ansible_facts.fqdn | lower }}"

#
# system_init
#
# Perform minor cleanups after system
# initial installation. See the tasks
# for details. Using this role is by
# no means mandatory or required.

# Actions to take after initialization
# reboot - reboot after initialization
# syslog - write message to system log
system_init_final_actions:
  - reboot
  - syslog

#
# system_keyboard
#
system_keyboard: fi
system_font: eurlatgr

#
# system_locale
#
# Available locale choices:
# C.UTF-8 - properly supported on RHEL 9+
# en_US.UTF-8 - supported on all RHEL versions
# auto - use C.UTF-8 if RHEL 9+ else en_US.UTF-8
system_locale: auto

# Reboot system after changes
system_locale_reboot: true

#
# timesync
#
# This role is a wrapper for redhat.rhel_system_roles.timesync
# that takes a list of NTP servers as input and after running
# the system role flushes handlers to update time immediately
ntp_servers:
  - time.cloudflare.com

#
# timezone
#
timezone: Europe/Helsinki

#
# watchdog
#
watchdog_enable: false

# Configure systemd watchdog options,
# see systemd-system.conf(5) for info
watchdog_runtime_sec: '60s'
watchdog_reboot_sec: #'10min'
watchdog_kexec_sec: #'off'
watchdog_device: #/dev/watchdog0
